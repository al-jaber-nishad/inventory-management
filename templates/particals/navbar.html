{% load static %}
<div class="header">
  <div class="header-left active">
    <a href="{% url 'home' %}" class="logo">
      <img src="{% static 'img/full-logo.png' %}" alt="" />
    </a>
    <a href="{% url 'home' %}" class="logo-small">
      <img src="{% static 'img/logo.png' %}" alt="" />
    </a>
    <a id="toggle_btn" href=""> </a>
  </div>

  <a id="mobile_btn" class="mobile_btn" href="#sidebar">
    <span class="bar-icon">
      <span></span>
      <span></span>
      <span></span>
    </span>
  </a>

  <ul class="nav user-menu">

    <!-- Add New Button -->
    <li class="nav-item">
      <button type="button" class="btn btn-add-new">
        <a href="{% url 'sale_create' %}">
          <i class="fa fa-laptop me-1"></i>POS
        </a>
      </button>
    </li>

    <!-- Fullscreen Toggle -->
    <li class="nav-item">
      <a href="#" class="nav-link icon-link" id="fullscreen-toggle">
        <i class="fa fa-expand"></i>
      </a>
    </li>

    <!-- Email/Messages -->
    <li class="nav-item">
      <a href="#" class="nav-link icon-link position-relative">
        <i class="fa fa-envelope"></i>
        <span class="notification-badge">1</span>
      </a>
    </li>

    <!-- Notifications -->
    <li class="nav-item">
      <a href="#" class="nav-link icon-link">
        <i class="fa fa-bell"></i>
      </a>
    </li>

    <!-- Settings -->
    <li class="nav-item">
      <a href="#" class="nav-link icon-link">
        <i class="fa fa-cog"></i>
      </a>
    </li>

    <!-- User Profile -->
    <li class="nav-item dropdown has-arrow main-drop">
      <a href="#" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
        <span class="user-img">
          {% if request.user.profile_picture %}
            <img src="{{request.user.profile_picture.url}}" alt="User">
          {% else %}
            <img src="{% static 'img/icons/avator.png' %}" alt="User">
          {% endif %}
          <span class="status online"></span>
        </span>
      </a>
      <div class="dropdown-menu menu-drop-user">
        <div class="profilename">
          <div class="profileset">
            <div class="profilesets">
              <h6>{{ request.user.email }}</h6>
              <h5>{{ request.user.username }} | {{ request.user.role.name }}</h5>
            </div>
          </div>
          <hr class="m-0" />
          <a class="dropdown-item" href="{% url 'profile' %}">
            <i class="me-2" data-feather="user"></i> My Profile
          </a>
          <hr class="m-0" />
          <a class="dropdown-item logout pb-0" href="{% url 'logout' %}">
            <img src="{% static 'img/icons/log-out.svg' %}" class="me-2" alt="img" />
            Logout
          </a>
        </div>
      </div>
    </li>
  </ul>

  <div class="dropdown mobile-user-menu">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="fa fa-ellipsis-v"></i>
    </a>
    <div class="dropdown-menu dropdown-menu-right">
      <a class="dropdown-item" href="{% url 'profile' %}">My Profile</a>
      <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
    </div>
  </div>
</div>

<style>
/* Add New Button Styling */
.btn-add-new {
  background-color: #2c3e50;
  color: white !important;
  border: none;
  padding: 6px 20px;
  margin-top: 15px;
  border-radius: 8px;
  font-weight: 500;
  font-size: 14px;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 2px 4px rgba(255, 159, 67, 0.2);
}

.btn-add-new a {
  color: white;
}

.btn-add-new:active {
  transform: translateY(0);
}

/* POS Button Styling */
.btn-pos {
  background-color: #2c3e50;
  color: white !important;
  border: none;
  padding: 10px 24px;
  border-radius: 8px;
  font-weight: 500;
  font-size: 14px;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 2px 4px rgba(44, 62, 80, 0.2);
  text-decoration: none;
}

.btn-pos:hover {
  background-color: #34495e;
  color: white !important;
  box-shadow: 0 4px 8px rgba(44, 62, 80, 0.3);
  transform: translateY(-1px);
  text-decoration: none;
}

.btn-pos:active {
  transform: translateY(0);
}

/* Store Selector */
.store-selector {
  color: #333;
  font-weight: 500;
}

/* Icon Links */
.icon-link {
  color: #6c757d;
  font-size: 18px;
  padding: 8px 12px;
  transition: color 0.3s;
}

.icon-link:hover {
  color: #333;
}

/* Flag Icon */
.flag-icon {
  width: 24px;
  height: 16px;
  object-fit: cover;
  border-radius: 2px;
}

/* Notification Badge */
.notification-badge {
  position: absolute;
  top: 5px;
  right: 8px;
  background-color: #dc3545;
  color: white;
  border-radius: 50%;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: bold;
}

/* User Image Only */
.user-menu .userset {
  padding: 5px;
}

.user-menu .user-img img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}
</style>

<script>
// Fullscreen Toggle
document.getElementById('fullscreen-toggle')?.addEventListener('click', function(e) {
  e.preventDefault();
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
    this.querySelector('i').classList.remove('fa-expand');
    this.querySelector('i').classList.add('fa-compress');
  } else {
    document.exitFullscreen();
    this.querySelector('i').classList.remove('fa-compress');
    this.querySelector('i').classList.add('fa-expand');
  }
});
</script>